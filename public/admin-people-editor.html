<!DOCTYPE html>
<html lang="lv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>People Content Editor - Ilze Skrasti≈Üa</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/admin-people.css">
    <link rel="stylesheet" href="/css/editor.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&family=Open+Sans:wght@300;400;600&family=Comfortaa:wght@300;400;600&display=swap"
        rel="stylesheet">
</head>

<body class="admin-editor-body">
    <div class="admin-editor-container">
        <!-- Editor Header -->
        <header class="editor-header">
            <div class="editor-header-content">
                <div class="editor-header-left">
                    <button class="back-button" id="backButton" title="Back to People Management">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5"></path>
                            <path d="M12 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <div class="editor-title-group">
                        <h1 class="editor-title">People Content Editor</h1>
                        <div class="editor-breadcrumb">
                            <a href="/admin/dashboard" class="breadcrumb-link">
                                <svg class="breadcrumb-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                </svg>
                                Dashboard
                            </a>
                            <span class="breadcrumb-separator">></span>
                            <a href="/admin/people" class="breadcrumb-link">People Management</a>
                            <span class="breadcrumb-separator">></span>
                            <span class="breadcrumb-current" id="personNameBreadcrumb">Loading...</span>
                        </div>
                    </div>
                </div>
                <div class="editor-header-right">
                    <div class="editor-actions">
                        <button class="button-secondary" id="cancelButton">
                            <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                            Cancel
                        </button>
                        <button class="button-primary" id="saveButton" disabled>
                            <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                <polyline points="17,21 17,13 7,13 7,21"></polyline>
                                <polyline points="7,3 7,8 15,8"></polyline>
                            </svg>
                            <span id="saveButtonText">Save Changes</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Editor Main Content -->
        <main class="editor-main">
            <div class="content-editor-container">
                <div class="editor-layout">
                    <!-- Editor Sidebar -->
                    <div class="editor-sidebar">
                        <div class="person-preview-card">
                            <div class="person-preview-header">
                                <h3>Person Information</h3>
                            </div>
                            <div class="person-preview-content" id="personPreview">
                                <div class="person-preview-loading">
                                    <div class="loading-spinner">
                                        <svg viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-dasharray="31.416" stroke-dashoffset="31.416">
                                                <animate attributeName="stroke-dasharray" dur="2s" values="0 31.416;15.708 15.708;0 31.416"
                                                    repeatCount="indefinite" />
                                                <animate attributeName="stroke-dashoffset" dur="2s" values="0;-15.708;-31.416"
                                                    repeatCount="indefinite" />
                                            </circle>
                                        </svg>
                                    </div>
                                    <p>Loading person information...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Editor Main Panel -->
                    <div class="editor-main-panel">
                        <div class="editor-panel-header">
                            <div class="editor-panel-title">
                                <h2>Edit Content</h2>
                                <p class="editor-panel-subtitle">Edit the biographical content for <span id="personNameTitle">this person</span></p>
                            </div>
                            <div class="editor-toolbar">
                                <div class="editor-info">
                                    <div class="content-stats">
                                        <span class="stat-item">
                                            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                <polyline points="14,2 14,8 20,8"></polyline>
                                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                            </svg>
                                            <span id="characterCount">0</span> characters
                                        </span>
                                        <span class="stat-item">
                                            <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                            </svg>
                                            <span id="wordCount">0</span> words
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="editor-content-area">
                            <div class="content-editor-wrapper">
                                <textarea 
                                    class="content-editor" 
                                    id="contentEditor" 
                                    rows="20" 
                                    placeholder="Enter the biographical content for this person..."
                                    aria-label="Person biographical content">
                                </textarea>
                                
                                <div class="editor-footer">
                                    <div class="editor-status">
                                        <div class="save-status" id="saveStatus">
                                            <!-- Save status messages will appear here -->
                                        </div>
                                        <div class="last-saved" id="lastSaved">
                                            <!-- Last saved timestamp will appear here -->
                                        </div>
                                    </div>
                                    <div class="editor-actions-footer">
                                        <button class="button-secondary" id="revertButton" disabled>
                                            <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <polyline points="1,4 1,10 7,10"></polyline>
                                                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                                            </svg>
                                            Revert Changes
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Unsaved Changes Warning Modal -->
    <div class="modal-overlay" id="unsavedChangesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Unsaved Changes</h3>
            </div>
            <div class="modal-body">
                <p>You have unsaved changes. Are you sure you want to leave without saving?</p>
            </div>
            <div class="modal-actions">
                <button class="button-secondary" id="stayButton">Stay and Continue Editing</button>
                <button class="button-primary" id="discardButton">Discard Changes</button>
            </div>
        </div>
    </div>

    <!-- Save Error Modal -->
    <div class="modal-overlay" id="saveErrorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Save Error</h3>
            </div>
            <div class="modal-body">
                <p id="saveErrorMessage">An error occurred while saving your changes. Please try again.</p>
            </div>
            <div class="modal-actions">
                <button class="button-secondary" id="closeErrorButton">Close</button>
                <button class="button-primary" id="retrySaveButton">Retry Save</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <svg class="spinner" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-dasharray="31.416" stroke-dashoffset="31.416">
                    <animate attributeName="stroke-dasharray" dur="2s" values="0 31.416;15.708 15.708;0 31.416"
                        repeatCount="indefinite" />
                    <animate attributeName="stroke-dashoffset" dur="2s" values="0;-15.708;-31.416"
                        repeatCount="indefinite" />
                </circle>
            </svg>
            <p id="loadingText">Loading...</p>
        </div>
    </div>

    <script src="/js/admin-utils.js"></script>
    <script src="/js/admin-people-editor.js"></script>
</body>

</html>